<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>datepicker demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.13.3/themes/smoothness/jquery-ui.css"
    />
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="date-picker-wrapper">
      <div class="date-picker">
        <div id="datepicker"></div>
        <div class="test time-slot-wrapper popup">
          <div class="close">X</div>
          <div class="display-date-time">
            <span class="selected-date"></span>
            <span class="selected-time"></span>
          </div>
          <div class="time-slot">
            <div>
              <div class="slot" data-time="10:00 - 10:30">10:00 - 10:30</div>
              <div class="slot" data-time="11:00 - 11:30">11:00 - 11:30</div>
              <div class="slot" data-time="12:00 - 12:30">12:00 - 12:30</div>
              <div class="slot" data-time="01:00 - 01:30">01:00 - 01:30</div>
              <div class="slot" data-time="02:00 - 02:30">02:00 - 02:30</div>
              <div class="slot" data-time="03:00 - 03:30">03:00 - 03:30</div>
            </div>
            <div>
              <div class="slot" data-time="10:30 - 11:00">10:30 - 11:00</div>
              <div class="slot" data-time="11:30 - 12:00">11:30 - 12:00</div>
              <div class="slot" data-time="12:30 - 01:00">12:30 - 01:00</div>
              <div class="slot" data-time="01:30 - 02:00">01:30 - 02:00</div>
              <div class="slot" data-time="02:30 - 03:00">02:30 - 03:00</div>
              <div class="slot" data-time="03:30 - 04:00">03:30 - 04:00</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <style>
      .montserrat {
        font-family: "Montserrat", sans-serif;
        font-optical-sizing: auto;
        font-style: normal;
      }
      .date-picker-wrapper {
        width: 768px;
        margin: 100px auto;
        position: relative;
      }
      .date-picker {
        display: flex;
      }
      .ui-datepicker-month,
      .ui-datepicker-year {
        font-family: "Montserrat", sans-serif;
        font-weight: 500;
        font-size: 16px;
      }

      .ui-datepicker-calendar {
        font-family: "Montserrat", sans-serif !important;
        font-weight: 500 !important;
        font-size: 14px !important;
      }

      .display-date-time {
        font-family: "Montserrat", sans-serif;
        font-weight: 500;
        font-size: 16px;
        color: #0f1316;
        display: flex;
      }

      .selected-date {
        margin-right: 10px;
        margin-bottom: 10px;
        display: block;
      }

      .time-slot-wrapper {
        margin-left: 35px;
        margin-top: 45px;
      }

      .time-slot {
        display: flex;
        align-items: center;
        cursor: pointer;
      }

      .slot {
        font-family: "Montserrat", sans-serif;
        font-weight: 400;
        font-size: 14px;
        width: 120px;
        height: 42px;
        background: #f3f3f3;
        color: #3c3c3c;
        text-align: center;
        line-height: 38px;
        border-radius: 5px;
        margin-right: 10px;
        margin-top: 5px;
      }

      .active {
        background: #1d334e;
        color: #ffffff;
      }

      .ui-widget.ui-widget-content {
        border: none;
      }

      .ui-datepicker {
        width: 365px !important;
        height: 400px !important;
      }

      .ui-widget-header {
        background: none !important;
        border: none !important;
      }

      .ui-datepicker-next span,
      .ui-datepicker-prev span {
        display: none !important;
      }

      .ui-datepicker-prev,
      .ui-datepicker-prev:hover {
        background: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik01IDlMMS43MDcxMSA1LjcwNzExQzEuMzczNzcgNS4zNzM3NyAxLjIwNzExIDUuMjA3MTEgMS4yMDcxMSA1QzEuMjA3MTEgNC43OTI4OSAxLjM3Mzc3IDQuNjI2MjMgMS43MDcxMSA0LjI5Mjg5TDUgMSIgc3Ryb2tlPSIjNzg4NTkxIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=")
          no-repeat center center;
      }

      .ui-datepicker-next,
      .ui-datepicker-next:hover {
        background: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xIDlMNC4yOTI4OSA1LjcwNzExQzQuNjI2MjMgNS4zNzM3NyA0Ljc5Mjg5IDUuMjA3MTEgNC43OTI4OSA1QzQuNzkyODkgNC43OTI4OSA0LjYyNjIzIDQuNjI2MjMgNC4yOTI4OSA0LjI5Mjg5TDEgMSIgc3Ryb2tlPSIjNzg4NTkxIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=")
          no-repeat center center;
      }

      .ui-datepicker td span,
      .ui-datepicker td a {
        width: 42px !important;
        height: 42px !important;
        display: flex;
        justify-content: center;
        /* Centers horizontally */
        align-items: center;
        /* Centers vertically */
        border-radius: 4px;
        margin: 2px;
      }

      .ui-datepicker td a {
        background: #f3f3f3 !important;
        border: none !important;
        color: #3c3c3c !important;
      }

      .ui-datepicker td span {
        background: none !important;
        border: none !important;
        color: #999999 !important;
      }

      .booked span {
        color: #3c3c3c;
      }

      .ui-datepicker-calendar tbody tr td {
        border-radius: 5px !important;
      }

      .ui-datepicker-current-day .ui-state-active {
        background: #1d334e !important;
        color: #ffffff !important;
      }

      .ui-state-hover {
        border: none !important;
        color: #788591 !important;
        cursor: pointer;
      }
      .close {
        display: none;
      }
      @media (max-width: 768px) {
        .close {
          display: flex !important;
          justify-content: right;
          padding: 5px;
          cursor: pointer;
        }
        .time-slot-wrapper {
          margin-left: 0px;
          margin-top: 0px;
        }
        .date-picker-wrapper {
          width: 375px;
        }
        .time-slot-wrapper {
          display: none;
          background: white !important;
          top: -85px;
          width: 340px !important;
          left: -32px;
          padding-bottom: 100px !important;
        }
        .date-picker {
          display: flex;
          justify-content: center;
        }
        .slot {
          width: 160px;
          height: 50px;
          line-height: 50px;
        }
        .ui-dialog-titlebar-close {
          display: none !important;
        }
      }
    </style>
    <script>
      $(document).ready(function () {
        $(".close").click(function () {
          $(".time-slot-wrapper").dialog("close");
        });
        $(".selected-date").text(getFormattedDate());
        $(".slot").on("click", function (e) {
          $(".slot").removeClass("active");
          $(this).addClass("active");
          let date = $(this).data("time");
          $(".selected-time").empty();
          $(".selected-time").text(date);
          console.log(date);
        });
        $("#datepicker").datepicker({
          onSelect: function (dateText) {
            let date_format = getFormattedDate(dateText);
            $(".selected-date").empty();
            $(".selected-date").text(date_format);
            if ($(window).width() < 768) {
              $(".time-slot-wrapper").dialog({
                show: {
                  effect: "blind",
                  duration: 1000,
                },
                hide: {
                  effect: "explode",
                  duration: 1000,
                },
              });
            }
          },
          firstDay: 1,
          showOtherMonths: true,
          dayNamesMin: ["Sø", "Ma", "Ti", "On", "To", "Fr", "Lø"],
          prevText: "",
          nextText: "",
          beforeShowDay: function (date) {
            var bookedDates = ["2024-09-12", "2024-09-10"];
            var formattedDate = $.datepicker.formatDate("yy-mm-dd", date);

            if (bookedDates.indexOf(formattedDate) !== -1) {
              return [false, "booked", "This date is booked"];
            }
            return [true];
          },
        });
        function getFormattedDate(dateString = null) {
          const date = dateString ? new Date(dateString) : new Date();

          const dayNames = [
            "Søndag",
            "Mandag",
            "Tirsdag",
            "Onsdag",
            "Torsdag",
            "Fredag",
            "Lørdag",
          ];
          const monthNames = [
            "Januar",
            "Februar",
            "Marts",
            "April",
            "Maj",
            "Juni",
            "Juli",
            "August",
            "September",
            "Oktober",
            "November",
            "December",
          ];

          const day = date.getDate();
          const dayName = dayNames[date.getDay()];
          const monthName = monthNames[date.getMonth()];
          const suffix = getDaySuffix(day);

          return `${dayName}, ${monthName} ${day}${suffix}`;
        }

        function getDaySuffix(day) {
          if (day > 3 && day < 21) return "th"; // Special case for 11th, 12th, 13th
          switch (day % 10) {
            case 1:
              return "st";
            case 2:
              return "nd";
            case 3:
              return "rd";
            default:
              return "th";
          }
        }
      });
    </script>
  </body>
</html>
